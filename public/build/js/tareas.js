!function(){!async function(){try{const a="/api/tareas?id="+n(),o=await fetch(a),r=await o.json();t=r.tareas,e()}catch(t){console.log(t)}}();let t=[];function e(){if(function(){const t=document.getElementById("listado-tareas");for(;t.firstChild;)t.removeChild(t.firstChild)}(),0===t.length){const t=document.getElementById("listado-tareas"),e=document.createElement("LI");e.textContent="Parece Que No Tienes Tareas Para Este Proyecto. Crea Una Nueva!",e.classList.add("no-tareas"),t.appendChild(e)}else t.forEach(t=>{const e={0:"Pendiente",1:"Completado"},a=document.createElement("LI");a.dataset.tareaid=t.id,a.classList.add("tarea");const n=document.createElement("P");n.textContent=t.nombre;const o=document.createElement("DIV");o.classList.add("opciones");const r=document.createElement("BUTTON");r.classList.add("estado-tarea"),r.classList.add(""+e[t.estado].toLowerCase()),r.textContent=e[t.estado],r.dataset.estadoTarea=t.estado;const s=document.createElement("BUTTON");s.classList.add("eliminar-tarea"),s.dataset.idTarea=t.id,s.textContent="Eliminar",o.appendChild(r),o.appendChild(s),a.appendChild(n),a.appendChild(o);document.getElementById("listado-tareas").appendChild(a)})}function a(t,e,a){const n=document.createElement("DIV");n.classList.add("alerta",e),n.textContent=t,a.parentElement.insertBefore(n,a.nextElementSibling),setTimeout(()=>{n.remove()},5e3)}function n(){const t=new URLSearchParams(window.location.search);return Object.fromEntries(t.entries()).id}document.getElementById("agregar-tarea").addEventListener("click",(function(){const o=document.createElement("DIV");o.classList.add("modal"),o.innerHTML='\n\t\t\t<form class="formulario nueva-tarea">\n\t\t\t\t<legend>Agrega una Nueva Tarea</legend>\n\t\t\t\t<div class="campo">\n\t\t\t\t\t<label>Tarea</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\tname="tarea"\n\t\t\t\t\t\tplaceholder="Añadir Tarea"\n\t\t\t\t\t\tid="tarea"\n\t\t\t\t\t/>\n\t\t\t\t</div>\t\n\t\t\t\t<div class="opciones">\n\t\t\t\t\t<input type="submit" class="submit-nueva-tarea" value="Añadir Tarea"/>\n\t\t\t\t\t<button type="button" class="cerrar-modal">Cancelar</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t',setTimeout(()=>{document.querySelector(".formulario").classList.add("animar")},0),o.addEventListener("click",(function(r){if(r.preventDefault(),r.target.classList.contains("cerrar-modal")){document.querySelector(".formulario").classList.add("cerrar"),setTimeout(()=>{o.remove()},500)}r.target.classList.contains("submit-nueva-tarea")&&function(){const o=document.getElementById("tarea").value.trim(),r=document.querySelector(".formulario legend");if(""===o){const t="El Titulo es Obligatorio";return function(t,e){t.forEach(t=>{e===t.textContent&&t.remove()})}(document.querySelectorAll("form .alerta"),t),void a(t,"error",r)}!async function(o){const r=new FormData;r.append("nombre",o);const s=n();r.append("url",s);try{const n="http://localhost:3000/api/tarea",s=await fetch(n,{method:"POST",body:r}),c=await s.json(),d=document.querySelector(".formulario legend");if(a(c.mensaje,c.tipo,d),"exito"===c.tipo){const a=document.querySelector(".modal");setTimeout(()=>{a.remove()},3e3);const n={id:String(c.id),nombre:o,estado:"0",proyectoid:c.proyectoid};t=[...t,n],e()}}catch(t){console.log(t)}}(o)}()})),document.querySelector(".dashboard").appendChild(o)}))}();